<!DOCTYPE html>
<html lang="en">
  <head>
  </head>
  <%if current_user.is_admin != true%>
    <%= render 'layouts/404'%>
  <%else%>


    <body class="index-page sidebar-collapse">
      <div >
        <div class="container">
          <div class="row">
            <div class="col-md-8 ml-auto mr-auto">
              <div class="brand">
                <h1 style="margin: 100px;" class="title">Bonjour <%= current_user.pseudo%></h1>
              </div>
            </div>
          </div>
        </div>
      </div>

            <div style="margin-top: 100px;" class=" main main-raised">
        <div class="section section-basic">
          <div class=" container">
            <!-- Ici nous savons combien d'articles nous avons à valider avec un  if-->
            <%if Article.where(:is_validated => 'false').count == 0%>
              <h4 style="" ><span class="badge badge-pill badge-success">Success</span>
                Vous n'avez aucun article à valider </h4>
            <%else%>
              <h4 style="" ><span class="badge badge-pill badge-warning">Warning</span>
                Vous avez <%= Article.where(:is_validated => 'false').count%> article(s) à valider </h4>
            <%end%>
            <%if Event.where(:is_validated => 'false').count == 0%>
              <h4 style="" ><span class="badge badge-pill badge-success">Success</span>
                Vous n'avez aucun évenement à valider </h4>
            <%else%>
              <h4 style="" ><span class="badge badge-pill badge-warning">Warning</span>
                Vous avez <%= Event.where(:is_validated => 'false').count%> évenement(s) à valider </h4>
            <%end%>
          </div>
        </div>
        <div class>
        </div>
      </div>

      <div style="margin-top: 100px;" class="main main-raised">
        <div class="section section-basic">
          <div class=" container">
            <h4>Vous avez <%=Bug.all.count%> bugs en attente</h4>
            <%= link_to  'Voir les bugs' , bugs_path %>
            
          </div>
        </div>
        <div class>
        </div>
      </div>

        <div class=" ">
              <ul  style="margin-left: 40%;" class=" selection-admin nav nav-pills nav-pills-icons" role="tablist">
                <!--
                                color-classes: "nav-pills-primary", "nav-pills-info", "nav-pills-success", "nav-pills-warning","nav-pills-danger"
                            -->
                <li class="nav-item">
                  <a class="nav-link" href="#dashboard-1" role="tab" data-toggle="tab">
                   <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABN0lEQVRIS8WU/zFFMRBGz+uADqgAFaADKkAFRgWoABWgAlTw6EAHWtABc8zG3MlLbuI9l/3n/pjkO5vd/TJj4phNrE8v4AA4BfYioWfgEvA5Gj2AO+CooiLkYozQApj5QwicAY/xfgycx/v+2ElaAEuwCyh+nWVq5kJeBqVbOEwL8BE71oH3bPcG8Bb/qjr/DkglKjUzlegJsFfFaJ1g2GQF70PFqUrTs1KT1UuZljJceUyTqAYT5EQZTo7fv2K0llmXdvJaXA/2Ybui8hrmuymM8deWWpN16hUgpCf0yMnA6d97SgDFb2OFI6iDa7XOe3OYQ3KAGetOn2bkRdcTadI8yeawXDmgyzwVYtGUOcCmbQGj5qkALNccUGMnrckB6XJrObxWtoX9fw7oaeiP1ixbim7I5IBP9Lo9GWglB+QAAAAASUVORK5CYII="/> Utilisateurs
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link " href="#schedule-1" role="tab" data-toggle="tab">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAn0lEQVRIS+2V0RFAMBBEnwqUgE6UQmWUohQ60AFzM4IJyRmZ8EF+c7ub20uyCZFXEpkfTWBaDuCq0/afFyiBBshvWtcDNdAZvN26FGQ3yQ1MOAqXgPE0UGOz3u5AHZqifMC/JhDdol9gna1ryD6LtG9DsL/AqYP7X+DjFl15hE6LRiC9wuCpGfZ5Yt9pCZw2IBOEvPIFTuDhj3At9IMFZzaFJBk/5tpnAAAAAElFTkSuQmCC"/> Evenements
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#tasks-1" role="tab" data-toggle="tab">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAn0lEQVRIS82V0Q2AIAxEj0nUTRxFJ9NRHEUn0dTYBBsRAi3KHzTcoy1wDsbDGeujKqAHMAFoC7NaAYwAFtLxM6BAUyjO20mrk4D9ipaW7abji1UHMFBWjQ8l43L9nL9l8DkgdB+SexDLwBzw/x7kvrnkHpgDQk0OgdXegRrAvETqAM3vemNf8f8iMpxZwRNIfHgynNySvO4rNZfoocwBB4owMhmDkH+/AAAAAElFTkSuQmCC"/> Articles
                  </a>
                </li>
              </ul>
              <div class="tab-content tab-space">
                <div class="tab-pane active" id="dashboard-1">
                   <!-- First card : presentation -->
      <div style="margin-top: 100px" class="main main-raised">
        <div class="section section-basic">
          <div class="container">
            <h2 style="text-align: center; margin: 50px;" >Utilisateurs</h2>
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Pseudo</th>
                  <th>Grade</th>
                  <th>Option</th>
                  <th>Supprimer</th>
                </tr>
              </thead>
              <% User.all.each do |user|%>
                <tbody>
                  <td><%= user.id %></td>
                  <td> <%= link_to  user.pseudo , user_path(user.id) %> </td>
                  <%if user.is_admin != false%>
                    <td><span class="badge badge-warning m-0">Admin</span></td>
                    <td>  <%= link_to "Retrograder (not working)", :controller => :users, :action => :toggle_check, user_id: user.id %>
                    </td>
                  <%else%>
                    <td><span class="badge badge-info m-0">User</span>
                      <td><%= link_to "Upgrader (not working)", :controller => :users, :action => :toggle_check, user_id: user.id %></td>
                      <td>
                        <%= link_to  user, method: :delete, data: { confirm: "Vous êtes sur ?"} do %>
                        <i class="material-icons">
delete
</i
<%end%>
                      </td>
                    <%end%>
                  </td>
                <%end%>
              </tbody>
            </table>
          </div>
        </div>
        <div class>
        </div>
      </div>
                </div>
                <div class="tab-pane" id="schedule-1">
                <div style="margin-top: 100px;" class="main main-raised">
          <div class="section section-basic">
            <div class="container">
              <h2 style="text-align: center; margin: 50px;" >Evenements</h2>
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Nom </th>
                    <th>Nombre de participant</th>
                    <th>Status</th>
                    <th>Option</th>
                    <th>Supprimer</th>
                  </tr>
                </thead>
                <% Event.all.each do |event|%>
                  <tbody>
                    <td><%= event.id %></td>
                    <td> <%= link_to  event.title , event_path(event.id) %></td>
                    <td><%= event.attendances.count %></td>
                    <%if event.is_validated != false%>
                      <td><span class="badge badge-success m-0">Approuvé</span></td>
                      <td><%= link_to "Ne pas accepter", :controller => :events, :action => :toggle_check, event_id: event.id %></td>
                    <%else%>
                      <td><span class="badge badge-danger m-0">Non approuvé</span></td>
                      <td><%= link_to "Accepter", :controller => :events, :action => :toggle_check, event_id: event.id %></td>
                    <%end%>
                    <td>
                        <%= link_to  event, method: :delete, data: { confirm: "Vous êtes sur ?"} do %>
                        <i class="material-icons">
delete
</i
<%end%>
                      </td>
                    <%end%>
                  </tbody>
                </table>
              </div>
            </div>
            <div class>
            </div>
          </div>
                </div>
                <div class="tab-pane" id="tasks-1">
      <div style="margin-top: 100px;" class="main main-raised">
        <div class="section section-basic">
          <div class="container">
            <h2 style="text-align: center; margin: 50px;" >Articles</h2>
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nom </th>
                  <th>Status</th>
                  <th>Option</th>
                  <th>Supprimer</th>
                </tr>
              </thead>
              <% Article.all.each do |article|%>
                <tbody>
                  <td><%= article.id %></td>
                  <td><%= link_to  article.title , article_path(article.id) %></td>
                  <%if article.is_validated != false%>
                    <td><span class="badge badge-success m-0">Approuvé</span></td>
                    <td>  <%= link_to "Ne pas accepter", :controller => :articles, :action => :toggle_check, article_id: article.id %>
                    </td>
                  <%else%>
                    <td><span class="badge badge-danger m-0">Non approuvé</span></td>
                    <td><%= link_to "Accepter", :controller => :articles, :action => :toggle_check, article_id: article.id %></td>
                  <%end%>
                  <td>
                        <%= link_to  article, method: :delete, data: { confirm: "Vous êtes sur ?"} do %>
                        <i class="material-icons">
delete
</i
<%end%>
                    </td>
                  <%end%>
                </tbody>
              </table>
            </div>
          </div>
          <div class>
          </div>
        </div>
                </div>
              </div>
            </div>

     


        </div>
      <%end%>
      <div style="margin-top: 100px;" class="main main-raised">
        <div class="section section-basic">
          <div class=" container">
            <!-- Ici nous savons combien d'articles nous avons à valider avec un  if-->
            <h2 class="text-center" >Stats</h2>
            <h4 class="text-center"  style="" >
              Vous avez <%= User.count%> utilisateurs </h4>
            <h4 class="text-center" style="" >
              Vous avez <%= Event.count%> events </h4>
            <h4 class="text-center" style="" >
              Vous avez <%= Article.count%> articles</h4>
          </div>
        </div>
        <div class>
        </div>
      </div>
    </body>
  </html>
